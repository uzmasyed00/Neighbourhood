<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Your Moving Companion</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <form id="form-container" class="form-container">
        <label for="address">Address: </label><input id="address" type="textbox">
        <input id="submit" type="button" value="Geocode">
    </form>

    <hr>

    <div id = "map">
    </div>

     <script>
     var map;
     var address;
     function initMap() {
         var map_lat_lng = new google.maps.LatLng(-34.397,150.644);
        // console.log(typeof (location_to_search_places))
         var geocoder = new google.maps.Geocoder();
        /* var address_geocode = geocodeAddress(address, geocoder, map);

         geocoder.geocode(address, function(results, status){

         })*/
         map = new google.maps.Map(document.getElementById('map'), {
          //center: {lat: -34.397, lng: 150.644},
             center: map_lat_lng,
             zoom: 8
        });

          document.getElementById('submit').addEventListener('click', function() {
              var address = document.getElementById('address').value;
              console.log("Address when Geocode clicked is" + address)
             geocodeAddress(address, geocoder, map);
            });





         //var geocoder = new google.maps.Geocoder();
        /* document.getElementById('submit').addEventListener('click', function() {
            var address_geocode = geocodeAddress(address, geocoder, map);
             console.log("address_geocode is" + address_geocode)
            });*/

      /*   var request = {
            location: location_to_search_places,
            radius: '50000',
            types: ['food']
        };

         var service;
         service = new google.maps.places.PlacesService(map);
         service.nearbySearch(request, callback)*/

        /*  var addressInput = document.getElementById('address').value;

          var geocoder = new google.maps.Geocoder();

          geocoder.geocode({address: addressInput}, function(results, status) {

          if (status == google.maps.GeocoderStatus.OK) {

             map.setCenter(results[0].geometry.location);

             map.setZoom(17);
            }
        });*/
       /*  console.log(document.getElementById('address').value);
         var location_to_search_places = new google.maps.LatLng(40.7413549,-73.99802439999996);
          map = new google.maps.Map(document.getElementById('map'), {
             center: location_to_search_places,
             zoom: 8
         // center: {lat: -34.397, lng: 150.644}
        });


         var marker = new google.maps.Marker({
          position: location_to_search_places ,
          map: map
        });

         var request = {
            location: location_to_search_places,
            radius: '500'
           // types: ['store']
        };
         var service;
         service = new google.maps.places.PlacesService(map);
         service.nearbySearch(request, callback);*/

       /*  var geocoder = new google.maps.Geocoder();
         document.getElementById('submit').addEventListener('click', function() {
             geocodeAddress(geocoder, map);
            });*/

     }

     function callback(results, status) {
     if (status == google.maps.places.PlacesServiceStatus.OK) {
         console.log(status)
         console.log(results)
        for (var i = 0; i < results.length; i++) {
            var place = results[i];
            console.log(place)
            addMarker(results[i]);
            }
        }
    }

     function addMarker(place) {
         var marker = new google.maps.Marker({
             map: map,
             position: place.geometry.location
             /*icon: {
                 url: 'http://maps.gstatic.com/mapfiles/circle.png',
                 anchor: new google.maps.Point(10, 10),
                 scaledSize: new google.maps.Size(10, 17)
             }*/
         });
     }

     function sayHello() {
      console.log("Hello")
     }

     function geocodeAddress(address, geocoder, resultsMap) {
        // console.log(document.getElementById('address').value);
        //var address = document.getElementById('address').value;
         console.log("address is" + address);
        geocoder.geocode({'address': address}, function(results, status) {
          if (status === 'OK') {
              console.log("results is" + results);
              for (i=0; i<results.length; i++){
                  console.log("Result is" + results[i]);
              }
              console.log("latlng is" + results[0].geometry.location)
            resultsMap.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
              map: resultsMap,
              position: results[0].geometry.location
            });

              return results[0].geometry.location
          } else {
            alert('Geocode was not successful for the following reason: ' + status);
          }
        });
      }

   </script>
    <script src="js/libs/jquery.min.js"></script>
    <script src="js/script.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAMz-JMZ-DxEXfOS8_f1nenbjSSs9Nop_U&v=3&libraries=places&callback=initMap" async defer>
    </script>
</body>
</html>
</title>
</head>
<body>

</body>
</html>