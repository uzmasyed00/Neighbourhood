<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Your Moving Companion</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <form id="form-container" class="form-container">
        <label for="city">Neighbourhood: </label><input type="text" id="city" value="">
        <button id="submit-btn">Submit</button>
    </form>

    <hr>

    <div id="floating-panel">
      <input id="address" type="textbox">
      <input id="submit" type="button" value="Geocode">
    </div>

    <div id = "map">

    </div>

     <script>
     var map;
     function initMap() {
         var pyrmont = new google.maps.LatLng(40.7413549,-73.99802439999996);
          map = new google.maps.Map(document.getElementById('map'), {
             center: pyrmont,
             zoom: 8
         // center: {lat: -34.397, lng: 150.644}
        });
         var marker = new google.maps.Marker({
          position: pyrmont ,
          map: map
        });

         var request = {
            location: pyrmont,
            radius: '500'
           // types: ['store']
        };
         var service;
         service = new google.maps.places.PlacesService(map);
         service.nearbySearch(request, callback);

         var geocoder = new google.maps.Geocoder();
         document.getElementById('submit').addEventListener('click', function() {
             geocodeAddress(geocoder, map);
            });

     }

     function callback(results, status) {
     if (status == google.maps.places.PlacesServiceStatus.OK) {
        for (var i = 0; i < results.length; i++) {
            var place = results[i];
            createMarker(results[i]);
            }
        }
    }
     function sayHello() {
      console.log("Hello")
     }

     function geocodeAddress(geocoder, resultsMap) {
        var address = document.getElementById('address').value;
         console.log("address is" + address);
        geocoder.geocode({'address': address}, function(results, status) {
          if (status === 'OK') {
            resultsMap.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
              map: resultsMap,
              position: results[0].geometry.location
            });
          } else {
            alert('Geocode was not successful for the following reason: ' + status);
          }
        });
      }

   </script>
    <script src="js/libs/jquery.min.js"></script>
    <script src="js/script.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAMz-JMZ-DxEXfOS8_f1nenbjSSs9Nop_U&v=3&callback=initMap" async defer>
    </script>
</body>
</html>
